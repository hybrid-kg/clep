sudo: false
cache: pip
language: python
python:
  - 3.8
stages:
  - lint
  - docs
  - test
env:
  global:
    - RPY2_CFFI_MODE=ABI
addons:
  apt:
    sources:
      - r-packages-trusty
    packages:
      - r-base
jobs:
  include:
    # lint stage
    - stage: lint
      env: TOXENV=manifest
    - env: TOXENV=flake8
    - env: TOXENV=pyroma
    # docs stage
    - stage: docs
      env: TOXENV=doc8
    - env: TOXENV=readme
    - env: TOXENV=docs
    # test stage
    - stage: test
      env: TOXENV=py
install:
- pip install --upgrade pip
- pip install tox
- pip install codecov
- pip install coverage
script:
- tox
after_success:
- tox -e coverage-report
- codecov

